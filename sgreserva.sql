-- Script was generated by Devart dbForge Studio for MySQL, Version 6.0.151.0
-- Product home page: http://www.devart.com/dbforge/mysql/studio
-- Script date 30/10/2015 18:46:53
-- Server version: 5.5.24-log
-- Client version: 4.1

-- 
-- Disable foreign keys
-- 
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;

-- 
-- Set character set the client will use to send SQL statements to the server
--
SET NAMES 'utf8';

-- 
-- Set default database
--
USE sgreserva;

--
-- Definition for table periodo
--
DROP TABLE IF EXISTS periodo;
CREATE TABLE periodo (
  id INT(11) NOT NULL AUTO_INCREMENT,
  nome VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE INDEX UK_periodo_id (id)
)
ENGINE = INNODB
AUTO_INCREMENT = 6
AVG_ROW_LENGTH = 4096
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Definition for table predio
--
DROP TABLE IF EXISTS predio;
CREATE TABLE predio (
  id INT(11) NOT NULL AUTO_INCREMENT,
  nome VARCHAR(255) DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE INDEX UK_predio_id (id)
)
ENGINE = INNODB
AUTO_INCREMENT = 2
AVG_ROW_LENGTH = 16384
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Definition for table usuario
--
DROP TABLE IF EXISTS usuario;
CREATE TABLE usuario (
  id INT(11) NOT NULL AUTO_INCREMENT,
  nome VARCHAR(50) DEFAULT NULL,
  email VARCHAR(50) DEFAULT NULL,
  senha VARCHAR(32) DEFAULT NULL,
  PRIMARY KEY (id),
  UNIQUE INDEX UK_usuario_email (email(15)),
  UNIQUE INDEX UK_usuario_id (id)
)
ENGINE = INNODB
AUTO_INCREMENT = 4
AVG_ROW_LENGTH = 16384
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Definition for table sala
--
DROP TABLE IF EXISTS sala;
CREATE TABLE sala (
  id INT(11) NOT NULL AUTO_INCREMENT,
  predio_id INT(11) DEFAULT NULL,
  nome VARCHAR(255) DEFAULT NULL,
  capacidade INT(11) DEFAULT NULL,
  PRIMARY KEY (id),
  CONSTRAINT FK_sala_predio_id FOREIGN KEY (predio_id)
    REFERENCES predio(id) ON DELETE RESTRICT ON UPDATE RESTRICT
)
ENGINE = INNODB
AUTO_INCREMENT = 10
AVG_ROW_LENGTH = 2048
CHARACTER SET utf8
COLLATE utf8_general_ci;

--
-- Definition for table reserva
--
DROP TABLE IF EXISTS reserva;
CREATE TABLE reserva (
  id INT(11) NOT NULL AUTO_INCREMENT,
  sala_id INT(11) NOT NULL,
  periodo_id INT(11) NOT NULL,
  dia DATE NOT NULL,
  professor_desc VARCHAR(255) DEFAULT NULL,
  disciplina_desc VARCHAR(255) DEFAULT NULL,
  status INT(11) NOT NULL DEFAULT 1 COMMENT '1 reservada, 2 confirmada, 3 cancelada ',
  observacao TEXT DEFAULT NULL,
  PRIMARY KEY (id),
  INDEX IDX_reserva_dia (dia),
  INDEX IDX_reserva_status (status),
  UNIQUE INDEX UK_reserva (sala_id, periodo_id, dia),
  UNIQUE INDEX UK_reserva_id (id),
  CONSTRAINT FK_reserva_periodo_id FOREIGN KEY (periodo_id)
    REFERENCES periodo(id) ON DELETE RESTRICT ON UPDATE RESTRICT,
  CONSTRAINT FK_reserva_sala_id FOREIGN KEY (sala_id)
    REFERENCES sala(id) ON DELETE RESTRICT ON UPDATE RESTRICT
)
ENGINE = INNODB
AUTO_INCREMENT = 20
AVG_ROW_LENGTH = 4096
CHARACTER SET utf8
COLLATE utf8_general_ci;

-- 
-- Dumping data for table periodo
--
INSERT INTO periodo VALUES
(1, '19:40'),
(2, '21:30'),
(3, '07:45'),
(4, '10:30');

-- 
-- Dumping data for table predio
--
INSERT INTO predio VALUES
(1, 'Predio A');

-- 
-- Dumping data for table usuario
--
INSERT INTO usuario VALUES
(3, 'teste', 'teste', '698dc19d489c4e4db73e28a713eab07b');

-- 
-- Dumping data for table sala
--
INSERT INTO sala VALUES
(1, 1, 'Sala 1', NULL),
(2, 1, 'Sala 2', NULL),
(3, 1, 'Sala 3', NULL),
(4, 1, 'Sala 4', NULL),
(5, 1, 'Sala 5', NULL),
(6, 1, 'Sala 6', NULL),
(7, 1, 'Sala 7', NULL),
(8, 1, 'Sala 8', NULL);

-- 
-- Dumping data for table reserva
--
INSERT INTO reserva VALUES
(19, 3, 4, '2015-10-30', '5555', '33333', 1, '');

-- 
-- Enable foreign keys
-- 
/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;